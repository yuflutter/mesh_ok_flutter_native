# Mesh.OK

Текстовый чат между двумя устройствами Android через WiFi-direct. Первая попытка реализации на базе плагина flutter_p2p_connection оказалась не вполне удачной. Вот этот код:

https://github.com/yuflutter/mesh_ok_flutter_pure

Он работает, но из-за недостатков плагина и полном отсутcтвии обработки сетевых ошибок (все методы платформы возвращают true/false), пришлось отказаться от использования плагина, и переписать сетевую часть на котлин.

В итоге на котлин перенесено:
- Запрос разрешений и включение сетевых сервисов (асинхронный API андроида был преобразован в корутины).
- Реализация протокола WiFi-direct (кроме определения сетевых служб).

На флаттере осталось:
- Пользовательский интерфейс.
- Реализация клиентских и серверных вебсокетов.

## TODO

- Усовершенствовать обработку ошибок, похоже сейчас не всё обрабатывается корректно.

- Добавить извлечение сетевого статуса WifiP2pInfo при старте приложения (сейчас приходится переподключаться к пиру для получения колбэка с IP-адресом группы).

- Разобраться, как работает группа P2P, и насколько реально построить MESH.

- Отказаться от прямого использования FlutterView, и оформить котлин-код в соответствии с рекомендациям к нативным плагинам флаттер.

- В перспективе оформить сетевую часть отдельным публичным пакетом, который будет лучше, чем flutter_p2p_connection.
